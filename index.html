<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ルーム選択</title>
</head>
<body>

<h2>ながおありがとう</h2>

<p>名前：<input id="name"></p>
<p>合言葉：<input id="room"></p>

<button onclick="enter('play')">参加</button>
<button onclick="enter('watch')">観戦</button>

<video id="introVideo" autoplay muted playsinline>
  <source src="video/intro.mp4" type="video/mp4">
</video>
  
<script>
const intro = document.getElementById("intro");
const video = document.getElementById("introVideo");

/* すでに見ていればスキップ */
if (localStorage.getItem("introSeen")) {
  intro.style.display = "none";
} else {
  /* 動画終了でフェードアウト */
  video.addEventListener("ended", () => {
    localStorage.setItem("introSeen", "true");
    intro.classList.add("fadeout");
  });

  /* 念のため強制終了（5秒） */
  setTimeout(() => {
    localStorage.setItem("introSeen", "true");
    intro.classList.add("fadeout");
  }, 5000);
}

function enter(mode) {
  const name = nameInput.value.trim();
  const room = roomInput.value.trim();
  if (!room || (mode === 'play' && !name)) {
    alert("入力不足");
    return;
  }

  location.href =
    `battle.html?room=${encodeURIComponent(room)}&name=${encodeURIComponent(name)}&mode=${mode}`;
}

const nameInput = document.getElementById("name");
const roomInput = document.getElementById("room");
</script>

</body>
</html>



